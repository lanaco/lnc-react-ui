import { Meta, Story, Canvas, Props } from "@storybook/addon-docs/blocks";
import { ArgsTable, Stories } from "@storybook/addon-docs";
import Dropdown from "./index";
import Avatar from "../../General/Avatar";
import { components } from "./index";
import logo from "../../_utils/images/Image.png";
import Icon from "../../General/Icon";
import { useState, useRef } from "react";
import Button from "../../General/Button";

<Meta title="Inputs/Dropdown" component={Dropdown} />

export const TemplateDefault = (args) => (
  <div style={{ height: "130px" }}>
    <Dropdown {...args} />
  </div>
);

export const TemplateMethods = (args) => {
  const dropDownRef = useRef();
  return (
    <div style={{ height: "130px" }}>
      <Button text="Focus" onClick={() => dropDownRef.current.focus()} />
      &nbsp;&nbsp;
      <Button text="Blur" onClick={() => dropDownRef.current.blur()} />
      <br />
      <br />
      <Dropdown ref={dropDownRef} {...args} />
    </div>
  );
};

export const CustomOption = ({ children, ...props }) => {
  return (
    <components.Option {...props}>
      <span style={{ display: "flex", justifyContent: "space-between" }}>
        <span style={{ display: "flex", alignItems: "center", gap: "12px" }}>
          <Avatar image={props?.data?.logo} sizeInUnits="1.5rem" />
          {children}
        </span>
        <Icon icon="check" color="primary" />
      </span>
    </components.Option>
  );
};

export const CustomControl = ({ children, ...props }) => {
  return (
    <components.Control {...props}>
      <span
        style={{
          display: "flex",
          alignItems: "center",
          gap: "12px",
          width: "100%",
          paddingLeft: "12px",
        }}
      >
        <Avatar image={props?.selectProps?.value?.logo} sizeInUnits="1.5rem" />
        {children}
      </span>
    </components.Control>
  );
};

export const TemplateCustom = (args) => (
  <div style={{ height: "130px" }}>
    <Dropdown
      {...args}
      components={{ Option: CustomOption, Control: CustomControl }}
    />
  </div>
);

# Dropdown

```jsx
import { Dropdown } from "@lnc-react-ui";
```

<Canvas>
  <Story
    name="Default"
    args={{
      options: [
        { value: "1", label: "option 1" },
        { value: "2", label: "option 2" },
        { value: "3", label: "option 3" },
      ],
    }}
  >
    {TemplateDefault.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Default" />

#### See more about [React-Select props](https://react-select.com/props#select-props)

---

## Methods

This component exposes public methods. You can invoke them directly on the instance of the component, e.g. by using React Refs.

| Method | Args |
| ------ | :--: |
| focus  |  -   |
| blur   |  -   |

<Canvas>
  <Story
    name="Exposed Methods"
    args={{
      options: [
        { value: "1", label: "option 1" },
        { value: "2", label: "option 2" },
        { value: "3", label: "option 3" },
      ],
    }}
  >
    {TemplateMethods.bind({})}
  </Story>
</Canvas>

---

#### Prop `styles` is used to style Dropdown components. [Stlyes usage](https://react-select.com/styles).

---

## Custom components

React-Select library provides consumers with the building block necessary to create their component. [Documentation](https://react-select.com/components).

<Story
  name="Custom Options"
  args={{
    options: [
      { value: "1", label: "User 1", logo: logo },
      { value: "2", label: "User 2", logo: logo },
      { value: "3", label: "User 3", logo: logo },
    ],
  }}
>
  {TemplateCustom.bind({})}
</Story>

```jsx
import { Dropdown } from "@lnc-react-ui";
import { components } from "@lnc-react-ui/Dropdown";

const CustomOption = ({ children, ...props }) => {
  return (
    <components.Option {...props}>
      <span style={{ display: "flex", justifyContent: "space-between" }}>
        <span style={{ display: "flex", alignItems: "center", gap: "12px" }}>
          <Avatar image={props?.data?.logo} sizeInUnits="1.5rem" />
          {children}
        </span>
        <Icon icon="check" color="primary" />
      </span>
    </components.Option>
  );
};

const CustomControl = ({ children, ...props }) => {
  return (
    <components.Control {...props}>
      <span
        style={{
          display: "flex",
          alignItems: "center",
          gap: "12px",
          width: "100%",
          paddingLeft: "12px",
        }}
      >
        <Avatar image={props?.selectProps?.value?.logo} sizeInUnits="1.5rem" />
        {children}
      </span>
    </components.Control>
  );
};

export const Template = (args) => (
  <Dropdown
    {...args}
    components={{ Option: CustomOption, Control: CustomControl }}
  />
);
```

This component is built on top of [React-Select](https://www.npmjs.com/package/react-select). React-Select [documentaion](https://react-select.com/home).

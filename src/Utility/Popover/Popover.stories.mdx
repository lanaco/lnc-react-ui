import { Meta, Story, Canvas, Props } from "@storybook/addon-docs/blocks";
import { ArgsTable, Stories } from "@storybook/addon-docs";
import Button from "../../General/Button/Button";
import { useState, useEffect, useRef } from "react";
import { createPortal } from "react-dom";
import { Table } from "@storybook/components";
import Popover from "./Popover";
import PopoverTrigger from "./PopoverTrigger";
import PopoverContent from "./PopoverContent";
import PopoverDescription from "./PopoverDescription";
import PopoverHeading from "./PopoverHeading";
import PopoverClose from "./PopoverClose";
import { Prism as SyntaxHighlighter } from "react-syntax-highlighter";
import { nord } from "react-syntax-highlighter/dist/esm/styles/prism";

<Meta
  title="Utility/Popover"
  component={Popover}
  subcomponents={{ PopoverTrigger, PopoverContent }}
/>

export const TemplateDefault = (args) => {
  return (
    <div>
      <Popover placement="bottom">
        <PopoverTrigger>
          <Button>Popover Trigger</Button>
        </PopoverTrigger>
        <PopoverContent style={{ padding: "0.75rem" }}>
          This is Popover!
        </PopoverContent>
      </Popover>
    </div>
  );
};

export const TemplateUncotrolled = (args) => {
  return (
    <div>
      <Popover placement="bottom">
        <PopoverTrigger>
          <Button>Popover Trigger</Button>
        </PopoverTrigger>
        <PopoverContent>
          <PopoverHeading>Popover heading</PopoverHeading>
          <PopoverDescription>Popover description</PopoverDescription>
          <PopoverClose>
            <Button>Close</Button>
          </PopoverClose>
        </PopoverContent>
      </Popover>
    </div>
  );
};

export const TemplateControlled = (args) => {
  const [open, setOpen] = useState(false);
  return (
    <div>
      <Popover open={open} onOpenChange={setOpen} placement="left-start">
        <PopoverTrigger onClick={() => setOpen((v) => !v)}>
          <Button>Popover Trigger</Button>
        </PopoverTrigger>
        <PopoverContent>
          <PopoverHeading>Popover heading</PopoverHeading>
          <PopoverDescription>Popover description</PopoverDescription>
          <PopoverClose>
            <Button>Close</Button>
          </PopoverClose>
        </PopoverContent>
      </Popover>
    </div>
  );
};

export const TemplatePlacement = (args) => {
  return (
    <div>
      <Popover placement="top-end">
        <PopoverTrigger>
          <Button>Popover Trigger</Button>
        </PopoverTrigger>
        <PopoverContent>
          <PopoverHeading>Popover heading</PopoverHeading>
          <PopoverDescription>Popover description</PopoverDescription>
          <PopoverClose>
            <Button>Close</Button>
          </PopoverClose>
        </PopoverContent>
      </Popover>
    </div>
  );
};

export const TemplateOffset = (args) => {
  return (
    <div>
      <Popover offsetValue={15}>
        <PopoverTrigger>
          <Button>Popover Trigger</Button>
        </PopoverTrigger>
        <PopoverContent style={{ padding: "0.75rem" }}>
          This is Popover!
        </PopoverContent>
      </Popover>
    </div>
  );
};

# Popover

<SyntaxHighlighter language="jsx" style={nord}>
  {
    'import { Popover, PopoverTrigger, PopoverContent, PopoverHeading, PopoverClose } from "@lanaco/lnc-react-ui";'
  }
</SyntaxHighlighter>

<Canvas>
  <Story name="Default" args={{}}>
    {TemplateDefault.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Default" />

## Uncontrolled

<Canvas>
  <Story name="Uncontrolled" args={{}}>
    {TemplateUncotrolled.bind({})}
  </Story>
</Canvas>

## Controlled

<Canvas>
  <Story name="Controlled" args={{}}>
    {TemplateControlled.bind({})}
  </Story>
</Canvas>

## Placement

Example with _top-end_ placement

<Canvas>
  <Story name="Placement" args={{}}>
    {TemplatePlacement.bind({})}
  </Story>
</Canvas>

## OffsetValue

<Canvas>
  <Story name="Offset" args={{}}>
    {TemplateOffset.bind({})}
  </Story>
</Canvas>

### This component is built on top of <u> [Floating-UI Popover](https://floating-ui.com/docs/react) </u>
